<link rel="import" href="bwt-upload-behavior.html">
<dom-module id="bwt-image-preview">
    <template>
    <style is="custom-style">
    :host {
      display: block;
    }

    .template-div-droptext>span {
        text-align: center;
    }

    .template-div-droptext .template-span-button,.template-div-delete, iron-icon  {
      color: #1976d3;
      cursor: pointer;
    }

    .template-div-delete, .template-div-delete iron-icon{
      height: 42px;
      line-height: 43px;
      color: #9b9b9b;
    }

    .template-div-droptext span:nth-child(2){
      text-align: left;
      font-weight: 400;
    }

     .imageCircleContainer,.imageSquareContainer{
      order: 1;
      flex: wrap;
      border:  var(--preview-border,1px dahsed #dbdbdb);
      overflow: hidden;
      width: var(--preview-width, 250px);
      height: var(--preview-height, 250px);
    }

    .largeImageContainer {
      height: 800px;
      width: 800px;
    }

    .img {
      height:inherit;
      width:inherit;
      display: block;
    }

    .imageCircleContainer {
      border-radius: 100%;
    }

    .imageCircleContainer>div {
      background-size:cover !important;
    }

    </style>
    <template is="dom-if" if="{{ _checkTheme(theme,'circle') }}">
      <div class="imageCircleContainer">
         <div class="img" style="background: url('[[image]]') no-repeat center center;"></div>
      </div>
    </template>
    <template is="dom-if" if="{{ _checkTheme(theme,'square') }}">
      <div class="imageSquareContainer">
         <div class="img" style="background: url('[[image]]') no-repeat left top;"></div>
      </div>
    </template>
    </template>
    <script>
        Polymer({
            is: 'bwt-image-preview',
            behaviors: [BwtUploadBehavior],
            observers: ['_updateImage(placeholder,image)'],
            _checkTheme: function(theme, shape) {
                return (theme === shape) ? true : false;
            },
            _updateImage: function(placeholder, image) {
                this.image = (placeholder && image) ? image : placeholder;
            },
            _createImagePreview: function(file) {
                file.progress = 30;
                var fr = new FileReader();
                return new Promise(function(resolve, reject) {
                    fr.onload = function(e) {
                        var image = e.target.result;
                        this.image = image;
                        var img = new Image();
                        img.src = image;
                        resolve(image);
                    }.bind(this);
                    fr.readAsDataURL(file);
                }.bind(this));
            },
        });
    </script>
</dom-module>
